"use strict";(globalThis.webpackChunkc_users_us_er_project_unicorn_docs=globalThis.webpackChunkc_users_us_er_project_unicorn_docs||[]).push([[4438],{5057(e,n,s){s.r(n),s.d(n,{default:()=>x});var i=s(6540),a=s(1656),r=s(3611),t=s(4848);const c=(0,r.UU)("https://lpaqjhrjuokvhsdegynn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwYXFqaHJqdW9rdmhzZGVneW5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NjIxMzgsImV4cCI6MjA4MDIzODEzOH0.VtWNvXB8mMhOeg9GOwd3s6MjwxDjoMbS5cOW4wLe7WQ"),d="#F0F2F5",o="#E4E6EB",l="#65676B",h="#FFFFFF",p=`\n  .archive-container {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    display: flex;\n    height: calc(100vh - 60px);\n    background: ${d};\n  }\n  .sidebar {\n    width: 300px;\n    background: ${h};\n    border-right: 1px solid ${o};\n    overflow-y: auto;\n  }\n  .main-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    padding: 20px;\n    overflow-y: auto;\n  }\n  .header {\n    padding: 16px;\n    border-bottom: 1px solid ${o};\n    background: ${h};\n    position: sticky;\n    top: 0;\n  }\n  .archive-item {\n    padding: 12px 16px;\n    border-bottom: 1px solid ${o};\n    cursor: pointer;\n  }\n  .archive-item:hover { background: ${d}; }\n  .archive-item.active { background: #E7F3FF; }\n  \n  .message-card {\n    background: ${h};\n    padding: 16px;\n    border-radius: 8px;\n    margin-bottom: 12px;\n    box-shadow: 0 1px 2px rgba(0,0,0,0.1);\n  }\n  .meta-info {\n    font-size: 12px;\n    color: ${l};\n    margin-bottom: 4px;\n    display: flex;\n    justify-content: space-between;\n  }\n  .content { font-size: 15px; line-height: 1.5; }\n  .archived-badge {\n    background: ${"#FA383E"};\n    color: white;\n    padding: 2px 6px;\n    border-radius: 4px;\n    font-size: 10px;\n    text-transform: uppercase;\n  }\n`;function x(){const[e,n]=(0,i.useState)([]),[s,r]=(0,i.useState)(!0),[d,o]=(0,i.useState)(!1);(0,i.useEffect)(()=>{h()},[]);const h=async()=>{const{data:{session:e}}=await c.auth.getSession();"admin@gts.services"===e?.user?.email?(o(!0),x()):r(!1)},x=async()=>{r(!0);const{data:e,error:s}=await c.from("archived_messages").select("*").order("archived_at",{ascending:!1}).limit(50);!s&&e&&n(e),r(!1)};return d?(0,t.jsxs)(a.A,{title:"Archive Viewer",children:[(0,t.jsx)("style",{children:p}),(0,t.jsxs)("div",{className:"archive-container",children:[(0,t.jsx)("div",{className:"sidebar",children:(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h2",{children:"\ud83d\udce6 Archives"}),(0,t.jsx)("p",{style:{fontSize:13,color:l},children:"Messages older than 1hr are moved here."})]})}),(0,t.jsx)("div",{className:"main-content",children:s?(0,t.jsx)("div",{children:"Loading archives..."}):0===e.length?(0,t.jsx)("div",{style:{textAlign:"center",color:l,marginTop:40},children:"No archived messages found."}):e.map(e=>(0,t.jsxs)("div",{className:"message-card",children:[(0,t.jsxs)("div",{className:"meta-info",children:[(0,t.jsxs)("span",{children:["From: ",(0,t.jsxs)("strong",{children:[e.sender_id.slice(0,8),"..."]})]}),(0,t.jsxs)("span",{children:["Archived: ",new Date(e.archived_at).toLocaleString()]})]}),(0,t.jsx)("div",{className:"content",children:e.content}),(0,t.jsxs)("div",{style:{marginTop:8,fontSize:11,color:l},children:["Original Date: ",new Date(e.created_at).toLocaleString(),(0,t.jsx)("span",{style:{marginLeft:8},className:"archived-badge",children:"AUTO-DELETED"})]})]},e.id))})]})]}):(0,t.jsx)(a.A,{title:"Access Denied",children:(0,t.jsxs)("div",{style:{padding:40,textAlign:"center"},children:[(0,t.jsx)("h1",{children:"\u26d4 Restricted Access"}),(0,t.jsx)("p",{children:"This page is for Super Admins only."})]})})}}}]);